<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>my-scripts</title>
        <style type="text/css">
            @font-face {
                font-family:'misakimincho';
                src: url('../css/misaki_mincho.eot');
                src: url('../css/misaki_mincho.woff') format('woff'),
                    url('../css/misaki_mincho.ttf') format('truetype');
            }
            .misaki {
                font-family:'misakimincho';
                font-size:16px;
            }
        </style>
        <style>
        body{
                font-size: 30px;
                font-family: 'Press Start 2P', cursive;
                margin: 40px;
                background-color: #1f1e29;
                color: #51baf4;
            }
            #prof h1:first-letter{
                font-size: 125%;
                color: #7be0ff;
            }
        </style>
    </head>
    <body>
        <input type="text" name="commandResult" id="commandResult" placeholder="Command" readonly />
        <input type="button" value="↑" onclick="liveScreen('↑')" />
        <input type="button" value="→" onclick="liveScreen('→')" />
        <input type="button" value="←" onclick="liveScreen('←')" />
        <input type="button" value="↓" onclick="liveScreen('↓')" />
        <input type="button" value="Done" onclick=repeatTimer() />
      <script type="text/javascript">
          const res = document.getElementById("commandResult");

          function input(value) {
              const inputedValue = value;
              res.value = inputedValue;
          }
          
          function liveScreen(enteredValue) {
              if (!res.value) {
                  res.value = "";
              }
              res.value += enteredValue;
          }

          function startMovement() {
              const resultInput = res.value;
              var i = res.value.length -1;
              if (res.value[i] == "↑") {
                  // alert("上");
              }else if (res.value[i] == "→") {
                  // alert("右");
              }else if (res.value[i] == "←") {
                  // alert("左");
              }else if (res.value[i] == "↓") {
                  // alert("下");
              }
              res.value = resultInput.substring(0, res.value.length -1);
              if (res.value.length < 1){
                  stopRepeatTimer();
              }
              }
          let nIntervId;

              function repeatTimer() {
                      if (!nIntervId) {
                      nIntervId = setInterval(startMovement, 250);
                  }
                }
              function stopRepeatTimer() {
              clearInterval(nIntervId);
              // 変数から intervalID を解放
              nIntervId = null;
              }
              function keyboardInputHandler(e) {
                  e.preventDefault();
                  if (e.key === "↑") {
                      res.value += "↑";
                  } else if (e.key === "→") {
                      res.value += "→";
                  } else if (e.key === "←") {
                      res.value += "←";
                  } else if (e.key === "↓") {
                      res.value += "↓";
                  } else if (e.key === "あ") {
                      res.value += "あ";
                  } else if (e.key === "い") {
                      res.value += "い";
                  } else if (e.key === "う") {
                      res.value += "う";
                  } else if (e.key === "え") {
                      res.value += "え";
                  } else if (e.key === "お") {
                      res.value += "お";
                  } else if (e.key === "Enter") {
                      repeatTimer();
                  }
                  if (e.key === "Backspace") {
                      res.value = resultInput.substring(0, res.value.length - 1);
                  }
              }
      </script>
        <div>
            <h1 class = "misaki"><a href = 'https://hachchch.github.io/'>ホームへ戻る</a></h1>
        </div>
    </body>
</html>
